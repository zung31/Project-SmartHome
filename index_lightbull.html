<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width-device-width, initial-sacale=1.0">
    <title>Light Bulb On and Off</title>
    <link rel="stylesheet" href="style2.css">
</head>
<body>
    <div class="hero">
        <div class ="container">
            <div class="text-container">
                <h1><span class="black-text">Light Bulb Switch</span></h1>
                <p class="black-text">Turn on / off</p>
            </div>
            <label>
                <input type="checkbox">
                <span><ion-icon name="bulb-outline"></ion-icon></span>
            </label>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const checkbox = document.querySelector('input[type="checkbox"]');
                    checkbox.addEventListener('change', async () => {
                        const isChecked = checkbox.checked;
                        try {
                            const response = await fetch('/toggle-light', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ lightState: isChecked })
                            });

                            if (response.ok) {
                                console.log('Success sending request');
                            } else {
                                console.error('Failed sending request', response.status);
                            }
                        } catch (error) {
                            console.error('Error', error);
                        }
                    });
                });
            </script>
            <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
            <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
        </div>
    </div>
    <main>
        <div class="container">
            <h2>Information about Light</h2>
            <p>Taille : 120 cm</p>
            <p>Couleur : Blanc Gris</p>
            <p>Tension : 220 V</p>
            <p>Puissance maximale : 10 W</p>
            <p>Led inteÌ€gre : Non</p>
        </div>
    </main>
</body>
</html>